import{Dc as c,Na as o,ka as s,pa as i}from"./chunk-PEEDB4LE.js";var n=class t{platformId=i(o);isBrowser=c(this.platformId);key="sg.library.v1";cache=new Map;constructor(){this.load()}load(){if(this.isBrowser)try{let e=window.localStorage.getItem(this.key);if(e){let r=JSON.parse(e);this.cache=new Map(r.map(a=>[this.mkKey(a),a]))}}catch{}}persist(){if(this.isBrowser)try{let e=Array.from(this.cache.values());window.localStorage.setItem(this.key,JSON.stringify(e))}catch{}}mkKey(e){return`${e.source}:${e.id}`}isSaved(e){return this.cache.has(this.mkKey(e))}toggle(e){let r=this.mkKey(e);return this.cache.has(r)?(this.cache.delete(r),this.persist(),!1):(this.cache.set(r,e),this.persist(),!0)}list(){return Array.from(this.cache.values())}static \u0275fac=function(r){return new(r||t)};static \u0275prov=s({token:t,factory:t.\u0275fac,providedIn:"root"})};export{n as a};
