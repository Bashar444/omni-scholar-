import{a as F}from"./chunk-KYFIESY5.js";import{a as M,c as I,d as P}from"./chunk-USYTE2QY.js";import{a as E,b as w,c as y,f as D,h as R}from"./chunk-TPPHD3IY.js";import{Bb as m,Cb as a,Db as e,Kc as C,Lb as b,Nb as f,Nc as k,Pb as d,Qc as S,Sd as O,Ud as L,Va as i,Wd as B,Xd as T,Yd as V,bc as n,cc as v,dc as c,eb as h,kb as x,lc as _,qa as l,va as u,wa as g}from"./chunk-4BSDVLOV.js";var N=()=>["/scholar-graph"];function $(p,r){if(p&1){let t=b();a(0,"mat-card")(1,"mat-card-header")(2,"button",2),f("click",function(){u(t);let s=d();return g(s.goBack())}),a(3,"mat-icon"),n(4,"arrow_back"),e()(),a(5,"mat-card-title"),n(6),e()(),a(7,"mat-card-content")(8,"div",3)(9,"p")(10,"strong"),n(11,"Authors:"),e(),n(12),e(),a(13,"p")(14,"strong"),n(15,"Year:"),e(),n(16),e(),a(17,"p")(18,"strong"),n(19,"Source:"),e(),n(20),e(),a(21,"p")(22,"strong"),n(23,"ID:"),e(),n(24),e()(),a(25,"div",4)(26,"button",5),f("click",function(){u(t);let s=d();return g(s.openExternal())}),a(27,"mat-icon"),n(28,"open_in_new"),e(),n(29),e(),a(30,"button",6),f("click",function(){u(t);let s=d();return g(s.toggleSave())}),a(31,"mat-icon"),n(32),e(),n(33),e(),a(34,"button",7),n(35," Back to Search "),e()()()()}if(p&2){let t=d();i(6),v(t.paper.title),i(6),c(" ",t.paper.authors.join(", ")||"Unknown"),i(4),c(" ",t.paper.year),i(4),c(" ",t.paper.source),i(4),c(" ",t.paper.id),i(5),c(" Open in ",t.paper.source," "),i(3),v(t.isSaved()?"bookmark":"bookmark_border"),i(),c(" ",t.isSaved()?"Unsave":"Save"," "),i(),m("routerLink",_(9,N))}}function j(p,r){p&1&&(a(0,"mat-card")(1,"mat-card-content")(2,"p"),n(3,"Paper not found or data unavailable."),e(),a(4,"button",8),n(5,"Back to Search"),e()()()),p&2&&(i(4),m("routerLink",_(1,N)))}var U=class p{paper;route=l(M);router=l(I);location=l(C);lib=l(F);ngOnInit(){let r=this.router.getCurrentNavigation();if(this.paper=r?.extras?.state?.paper,!this.paper){let t=this.route.snapshot.paramMap.get("source"),o=this.route.snapshot.paramMap.get("id");t&&o&&(this.paper={id:o,source:t,title:"Details unavailable (navigate from search for full info)",authors:[],year:new Date().getFullYear()})}}goBack(){this.location.back()}openExternal(){if(!this.paper)return;let r=this.linkFor(this.paper);window.open(r,"_blank","noopener")}isSaved(){return this.paper?this.lib.isSaved(this.paper):!1}toggleSave(){this.paper&&this.lib.toggle(this.paper)}linkFor(r){switch(r.source){case"CrossRef":{let t=r.id||"";return t.startsWith("http")?t:`https://doi.org/${encodeURIComponent(t)}`}case"arXiv":{let t=r.id||"";if(t.startsWith("http"))try{let o=new URL(t);return`https://arxiv.org${o.pathname.includes("/abs/")?o.pathname:o.pathname.replace("/pdf/","/abs/")}`}catch{}return`https://arxiv.org/abs/${encodeURIComponent(t)}`}case"PubMed":return`https://pubmed.ncbi.nlm.nih.gov/${encodeURIComponent(r.id)}/`;default:return"#"}}static \u0275fac=function(t){return new(t||p)};static \u0275cmp=h({type:p,selectors:[["app-paper-detail"]],decls:3,vars:2,consts:[[1,"detail-container"],[4,"ngIf"],["mat-icon-button","",1,"back-btn",3,"click"],[1,"meta-section"],[1,"actions-section"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","accent",3,"click"],["mat-stroked-button","",3,"routerLink"],["mat-raised-button","",3,"routerLink"]],template:function(t,o){t&1&&(a(0,"div",0),x(1,$,36,10,"mat-card",1)(2,j,6,2,"mat-card",1),e()),t&2&&(i(),m("ngIf",o.paper),i(),m("ngIf",!o.paper))},dependencies:[S,k,R,E,y,D,w,V,T,B,L,O,P],styles:[".detail-container[_ngcontent-%COMP%]{padding:var(--spacing-lg);max-width:900px;margin:0 auto}.back-btn[_ngcontent-%COMP%]{margin-right:var(--spacing-md)}.meta-section[_ngcontent-%COMP%]{margin:var(--spacing-lg) 0}.meta-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:var(--spacing-sm) 0}.actions-section[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-md);flex-wrap:wrap;margin-top:var(--spacing-lg)}"]})};export{U as PaperDetailComponent};
